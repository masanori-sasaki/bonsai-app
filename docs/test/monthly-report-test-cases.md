# 月次レポート機能 結合テストケース

## 1. テスト概要

本ドキュメントは、盆栽管理アプリの月次レポート機能に関する結合テストケースを定義します。
月次レポート機能は、ユーザーの盆栽管理活動を月単位で集計・可視化し、記録として残すための機能です。

## 2. テスト環境

- URL: http://localhost:4200
- ログインID: example@example.com

## 3. 因子と水準の定義

結合テストでは、以下の因子と水準を考慮します。

### 3.1 因子と水準

| 因子ID | 因子名 | 水準ID | 水準値 |
|--------|--------|--------|--------|
| F1 | 盆栽データの有無 | L1-1 | 盆栽データあり（複数） |
|    |                  | L1-2 | 盆栽データなし |
| F2 | 作業記録の有無 | L2-1 | 作業記録あり（複数タイプ） |
|    |                | L2-2 | 作業記録なし |
| F3 | 重要作業の有無 | L3-1 | 重要作業あり（植替え、剪定など） |
|    |                | L3-2 | 重要作業なし |
| F4 | 画像の有無 | L4-1 | 画像あり |
|    |           | L4-2 | 画像なし |
| F5 | レポート生成方法 | L5-1 | 自動生成（月末） |
|    |                  | L5-2 | 手動生成 |
| F6 | 対象月 | L6-1 | 現在月 |
|    |        | L6-2 | 過去月 |
| F7 | 表示デバイス | L7-1 | デスクトップ |
|    |              | L7-2 | モバイル |
| F8 | 印刷機能 | L8-1 | 印刷実行 |
|    |          | L8-2 | 印刷なし |

## 4. ペアワイズ法によるテストケース

ペアワイズ法を用いて、2因子間の組み合わせを網羅するテストケースを作成します。

| テストケースID | F1<br>盆栽データ | F2<br>作業記録 | F3<br>重要作業 | F4<br>画像 | F5<br>レポート生成 | F6<br>対象月 | F7<br>デバイス | F8<br>印刷 |
|----------------|-------------------|----------------|----------------|------------|---------------------|--------------|----------------|------------|
| TC-MR-001      | L1-1 盆栽あり     | L2-1 記録あり   | L3-1 重要あり   | L4-1 画像あり | L5-1 自動生成 | L6-1 現在月 | L7-1 デスクトップ | L8-1 印刷実行 |
| TC-MR-002      | L1-1 盆栽あり     | L2-1 記録あり   | L3-2 重要なし   | L4-2 画像なし | L5-2 手動生成 | L6-2 過去月 | L7-2 モバイル | L8-2 印刷なし |
| TC-MR-003      | L1-1 盆栽あり     | L2-2 記録なし   | L3-1 重要あり   | L4-2 画像なし | L5-1 自動生成 | L6-2 過去月 | L7-1 デスクトップ | L8-2 印刷なし |
| TC-MR-004      | L1-1 盆栽あり     | L2-2 記録なし   | L3-2 重要なし   | L4-1 画像あり | L5-2 手動生成 | L6-1 現在月 | L7-2 モバイル | L8-1 印刷実行 |
| TC-MR-005      | L1-2 盆栽なし     | L2-1 記録あり   | L3-1 重要あり   | L4-2 画像なし | L5-2 手動生成 | L6-1 現在月 | L7-1 デスクトップ | L8-2 印刷なし |
| TC-MR-006      | L1-2 盆栽なし     | L2-1 記録あり   | L3-2 重要なし   | L4-1 画像あり | L5-1 自動生成 | L6-2 過去月 | L7-2 モバイル | L8-1 印刷実行 |
| TC-MR-007      | L1-2 盆栽なし     | L2-2 記録なし   | L3-1 重要あり   | L4-1 画像あり | L5-2 手動生成 | L6-2 過去月 | L7-1 デスクトップ | L8-1 印刷実行 |
| TC-MR-008      | L1-2 盆栽なし     | L2-2 記録なし   | L3-2 重要なし   | L4-2 画像なし | L5-1 自動生成 | L6-1 現在月 | L7-2 モバイル | L8-2 印刷なし |

## 5. テストケース詳細

### TC-MR-001: 盆栽あり・作業記録あり・重要作業あり・画像あり・自動生成・現在月・デスクトップ・印刷実行

**前提条件:**
- 複数の盆栽データが登録されている
- 現在月に複数タイプの作業記録がある
- 重要作業（植替え、剪定など）の記録がある
- 作業記録に画像が添付されている
- デスクトップ環境で表示

**テスト手順:**
1. テスト環境にアクセスし、ログインする
2. 月次レポート一覧画面に遷移する
3. 現在月のレポートが自動生成されていることを確認する
4. レポート詳細画面に遷移する
5. 各セクション（盆栽サマリー、ハイライト、推奨作業）の表示を確認する
6. 印刷ボタンをクリックし、印刷プレビューが表示されることを確認する

**期待結果:**
- 月次レポート一覧に現在月のレポートが表示される
- レポート詳細画面で盆栽サマリー、作業タイプ分布、重要作業ハイライト、推奨作業が正しく表示される
- 画像が適切に表示される
- 印刷プレビューが表示され、レポートが印刷可能な状態になる

### TC-MR-002: 盆栽あり・作業記録あり・重要作業なし・画像なし・手動生成・過去月・モバイル・印刷なし

**前提条件:**
- 複数の盆栽データが登録されている
- 過去月に作業記録があるが、重要作業（植替え、剪定など）はない
- 作業記録に画像が添付されていない
- モバイル環境で表示

**テスト手順:**
1. テスト環境にアクセスし、ログインする
2. 月次レポート一覧画面に遷移する
3. 「新規レポート生成」ボタンをクリックし、過去月を選択して手動でレポートを生成する
4. レポート詳細画面に遷移する
5. 各セクション（盆栽サマリー、ハイライト、推奨作業）の表示を確認する

**期待結果:**
- 月次レポート一覧に手動生成した過去月のレポートが表示される
- レポート詳細画面で盆栽サマリー、作業タイプ分布が正しく表示される
- 重要作業がないため、ハイライトセクションには「この月のハイライトはありません」と表示される
- 画像がないため、代替テキストまたはプレースホルダーが表示される
- モバイル画面でもレイアウトが崩れずに表示される

### TC-MR-003: 盆栽あり・作業記録なし・重要作業あり・画像なし・自動生成・過去月・デスクトップ・印刷なし

**前提条件:**
- 複数の盆栽データが登録されている
- 過去月に作業記録がない
- デスクトップ環境で表示

**テスト手順:**
1. テスト環境にアクセスし、ログインする
2. 月次レポート一覧画面に遷移する
3. 過去月のレポートが自動生成されていることを確認する
4. レポート詳細画面に遷移する
5. 各セクション（盆栽サマリー、ハイライト、推奨作業）の表示を確認する

**期待結果:**
- 月次レポート一覧に過去月のレポートが表示される
- 作業記録がないため、盆栽サマリーセクションには「この月の盆栽サマリーはありません」と表示される
- 作業記録がないため、作業タイプ分布が表示されない
- 重要作業がないため、ハイライトセクションには「この月のハイライトはありません」と表示される
- 推奨作業セクションは樹種に基づいて表示される

### TC-MR-004: 盆栽あり・作業記録なし・重要作業なし・画像あり・手動生成・現在月・モバイル・印刷実行

**前提条件:**
- 複数の盆栽データが登録されている
- 現在月に作業記録がない
- 盆栽情報に画像が添付されている
- モバイル環境で表示

**テスト手順:**
1. テスト環境にアクセスし、ログインする
2. 月次レポート一覧画面に遷移する
3. 「新規レポート生成」ボタンをクリックし、現在月を選択して手動でレポートを生成する
4. レポート詳細画面に遷移する
5. 各セクション（盆栽サマリー、ハイライト、推奨作業）の表示を確認する
6. 印刷ボタンをクリックし、印刷プレビューが表示されることを確認する

**期待結果:**
- 月次レポート一覧に手動生成した現在月のレポートが表示される
- 作業記録がないため、盆栽サマリーセクションには「この月の盆栽サマリーはありません」と表示される
- 作業記録がないため、作業タイプ分布が表示されない
- 重要作業がないため、ハイライトセクションには「この月のハイライトはありません」と表示される
- 推奨作業セクションは樹種に基づいて表示される
- 盆栽情報の画像が適切に表示される
- モバイル画面でもレイアウトが崩れずに表示される
- 印刷プレビューが表示され、レポートが印刷可能な状態になる

### TC-MR-005: 盆栽なし・作業記録あり・重要作業あり・画像なし・手動生成・現在月・デスクトップ・印刷なし

**前提条件:**
- 盆栽データが登録されていない
- 作業記録データのみが存在する（異常データ）
- デスクトップ環境で表示

**テスト手順:**
1. テスト環境にアクセスし、ログインする
2. 月次レポート一覧画面に遷移する
3. 「新規レポート生成」ボタンをクリックし、現在月を選択して手動でレポートを生成する
4. エラーメッセージまたは空のレポートが表示されることを確認する

**期待結果:**
- 盆栽データがないため、レポート生成時にエラーメッセージが表示されるか、空のレポートが生成される
- 生成されたレポートには「盆栽データがありません」などの適切なメッセージが表示される

### TC-MR-006: 盆栽なし・作業記録あり・重要作業なし・画像あり・自動生成・過去月・モバイル・印刷実行

**前提条件:**
- 盆栽データが登録されていない
- 作業記録データのみが存在する（異常データ）
- モバイル環境で表示

**テスト手順:**
1. テスト環境にアクセスし、ログインする
2. 月次レポート一覧画面に遷移する
3. 過去月のレポートが自動生成されていることを確認する
4. レポート詳細画面に遷移する
5. エラーメッセージまたは空のレポートが表示されることを確認する
6. 印刷ボタンをクリックし、印刷プレビューが表示されることを確認する

**期待結果:**
- 盆栽データがないため、レポートには「盆栽データがありません」などの適切なメッセージが表示される
- 印刷プレビューが表示され、メッセージを含むレポートが印刷可能な状態になる

### TC-MR-007: 盆栽なし・作業記録なし・重要作業あり・画像あり・手動生成・過去月・デスクトップ・印刷実行

**前提条件:**
- 盆栽データが登録されていない
- 作業記録データも存在しない
- デスクトップ環境で表示

**テスト手順:**
1. テスト環境にアクセスし、ログインする
2. 月次レポート一覧画面に遷移する
3. 「新規レポート生成」ボタンをクリックし、過去月を選択して手動でレポートを生成する
4. エラーメッセージまたは空のレポートが表示されることを確認する
5. 印刷ボタンをクリックし、印刷プレビューが表示されることを確認する

**期待結果:**
- 盆栽データがないため、レポート生成時にエラーメッセージが表示されるか、空のレポートが生成される
- 生成されたレポートには「盆栽データがありません」などの適切なメッセージが表示される
- 印刷プレビューが表示され、メッセージを含むレポートが印刷可能な状態になる

### TC-MR-008: 盆栽なし・作業記録なし・重要作業なし・画像なし・自動生成・現在月・モバイル・印刷なし

**前提条件:**
- 盆栽データが登録されていない
- 作業記録データも存在しない
- モバイル環境で表示

**テスト手順:**
1. テスト環境にアクセスし、ログインする
2. 月次レポート一覧画面に遷移する
3. 現在月のレポートが自動生成されていることを確認する
4. レポート詳細画面に遷移する
5. エラーメッセージまたは空のレポートが表示されることを確認する

**期待結果:**
- 盆栽データがないため、レポートには「盆栽データがありません」などの適切なメッセージが表示される
- モバイル画面でもレイアウトが崩れずに表示される

## 6. 追加テストケース

### TC-MR-009: ページネーション機能の検証

**前提条件:**
- 多数の月次レポートが生成されている（20件以上）
- デスクトップ環境で表示

**テスト手順:**
1. テスト環境にアクセスし、ログインする
2. 月次レポート一覧画面に遷移する
3. 一覧の最下部に「さらに読み込む」ボタンが表示されていることを確認する
4. 「さらに読み込む」ボタンをクリックする
5. 追加のレポートが表示されることを確認する

**期待結果:**
- 初期表示では20件のレポートが表示される
- 「さらに読み込む」ボタンをクリックすると、追加のレポートが表示される
- すべてのレポートが表示されると「さらに読み込む」ボタンが非表示になる

### TC-MR-010: 推奨作業の表示検証

**前提条件:**
- 複数の盆栽データが登録されている（異なる樹種を含む）
- 現在月のレポートが生成されている
- デスクトップ環境で表示

**テスト手順:**
1. テスト環境にアクセスし、ログインする
2. 月次レポート一覧画面に遷移する
3. 現在月のレポートの詳細画面に遷移する
4. 「推奨作業」タブをクリックする
5. 樹種ごとの推奨作業が表示されることを確認する

**期待結果:**
- 推奨作業タブに次月の推奨作業が樹種ごとに表示される
- 優先度に応じて適切に色分けされている
- 各推奨作業に作業タイプ、理由、アドバイスが表示される

## 7. 結合テスト実施手順

1. テスト環境のセットアップ
   - テスト用データの準備（盆栽データ、作業記録データ）
   - テスト環境へのアクセス確認

2. テストケースの実行
   - 各テストケースを順番に実行
   - 実行結果を記録（成功/失敗、問題点、スクリーンショットなど）

3. 問題点の報告
   - 発見された問題点を報告
   - 再現手順、期待結果と実際の結果を記録

4. テスト結果のまとめ
   - テスト結果の集計
   - 全体的な品質評価
   - 改善提案

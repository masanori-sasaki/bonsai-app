# Bonsai App API テスト

このディレクトリには、Bonsai AppのAPIをテストするためのスクリプトが含まれています。

## 前提条件

- Node.js v16.x以上
- npm v7.x以上
- Cognitoユーザーアカウント（メールアドレスとパスワード）

## セットアップ

テスト環境をセットアップするには、以下のコマンドを実行します：

```bash
node setup-test-environment.js
```

このスクリプトは以下の処理を行います：

1. テストに必要なpackage.jsonファイルの作成
2. 依存パッケージのインストール（aws-amplify, axios, uuid）

## 利用可能なテスト

### WorkRecord API テスト

作業記録APIの動作確認を行うテストです。以下の操作を順番に実行します：

1. 認証トークンの取得（Cognitoを使用）
2. 盆栽の作成（テスト用）
3. 作業記録の作成
4. 作業記録の一覧取得
5. 作業記録の詳細取得
6. 作業記録の更新
7. 作業記録の削除
8. テスト用盆栽の削除

実行方法：

```bash
npm run test-work-record
```

実行すると、メールアドレスとパスワードの入力を求められます。Cognitoに登録されているアカウント情報を入力してください。

## テスト結果の確認

テスト実行中は、各ステップの処理内容と結果がコンソールに出力されます。エラーが発生した場合は、エラーメッセージとレスポンス情報が表示されます。

## トラブルシューティング

### 認証エラー

- メールアドレスまたはパスワードが間違っている場合は、正しい認証情報を入力してください。
- アカウントが確認されていない場合は、Cognitoコンソールでアカウントを確認してください。

### API接続エラー

- ネットワーク接続を確認してください。
- Lambda関数のURLが正しいことを確認してください。
- Lambda関数が正常に動作していることを確認してください。

### その他のエラー

- Node.jsとnpmのバージョンが前提条件を満たしていることを確認してください。
- 依存パッケージが正しくインストールされていることを確認してください。
